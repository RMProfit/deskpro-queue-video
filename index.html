<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Queue Video</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #000;
        overflow: hidden;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      }

      /* Full-bleed video */
      #player {
        position: fixed;
        inset: 0;
        width: 100vw;
        height: 100vh;
        object-fit: cover; /* key: full-bleed */
        background: #000;
      }

      /* Optional overlay */
      #overlay {
        position: fixed;
        top: 24px;
        left: 24px;
        padding: 12px 16px;
        border-radius: 12px;
        background: rgba(0,0,0,0.55);
        color: #fff;
        font-size: 22px;
        line-height: 1.2;
        max-width: 70vw;
        user-select: none;
      }

      /* Fallback state */
      #fallback {
        position: fixed;
        inset: 0;
        display: none; /* shown only on error */
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 48px;
        color: #fff;
        font-size: 28px;
        line-height: 1.3;
      }

      #fallback .card {
        max-width: 900px;
        padding: 28px 32px;
        border-radius: 16px;
        background: rgba(0,0,0,0.6);
      }

      #fallback .sub {
        margin-top: 12px;
        font-size: 18px;
        opacity: 0.85;
      }
    </style>
  </head>
  <body>
    <!-- Optional overlay text (set to display:none below if you want it off) -->
    <div id="overlay">Please wait — connecting you to the next available team member.</div>

    <video
      id="player"
      autoplay
      playsinline
      controls
      preload="auto"
    >
      <!-- Default source (can be overridden by ?src= ) -->
      <source id="source" src="https://images-assets.nasa.gov/video/iss064e003314/iss064e003314~orig.mp4" type="video/mp4" />
      Your browser does not support HTML5 video.
    </video>

    <div id="fallback">
      <div class="card">
        <div>We’re unable to load the waiting video right now.</div>
        <div class="sub">Please wait while we connect you, or see Guest Services for immediate assistance.</div>
      </div>
    </div>

    <script>
      // Allow swapping the video source without editing the file:
      // Example: https://<pages-url>/?src=https%3A%2F%2Fexample.com%2Fvideo.mp4
      const params = new URLSearchParams(window.location.search);
      const src = params.get('src');

      const video = document.getElementById('player');
      const source = document.getElementById('source');
      const fallback = document.getElementById('fallback');
      const overlay = document.getElementById('overlay');

      // If you want NO overlay at all, uncomment this:
      // overlay.style.display = 'none';

      if (src) {
        source.src = src;
        video.load();
      }

      function showFallback() {
        fallback.style.display = 'flex';
      }

      // Basic robustness: show fallback if video can’t load/play
      video.addEventListener('error', showFallback);
      video.addEventListener('stalled', showFallback);

      // Autoplay with sound may be blocked in some embedded browsers.
      // If autoplay fails, user can press play (controls are enabled).
      video.play().catch(() => {
        // Don’t force mute; just show fallback message so you know it needs interaction.
        // You can remove this line if you prefer silent failure.
        showFallback();
      });
    </script>
  </body>
</html>
